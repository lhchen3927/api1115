2020-11-15 10:51:23,672 apitest INFO test_business_flow.py [第24行] #################开始执行业务流接口#######################
2020-11-15 10:51:23,672 apitest INFO handle_data.py [第89行] 用例中提取到的正则结果['phone']
2020-11-15 10:51:24,336 apitest INFO handle_db.py [第28行] 查询个数0
2020-11-15 10:51:24,337 apitest INFO handle_data.py [第95行] 如果有手机号需要未注册的，调用函数生成新的未注册过手机号,将新生成的手机号设置成Data类属性
2020-11-15 10:51:24,337 apitest INFO handle_data.py [第99行] 替换#phone#,替换后phone值为：15523786285
2020-11-15 10:51:24,343 apitest INFO handle_data.py [第100行] 替换后用例为：
 {'id': 1, 'title': '前置条件-注册管理员', 'method': 'post', 'url': 'member/register', 'request_data': '{"mobile_phone":"15523786285","pwd":"123456789","type":0,"reg_name":"qianyu"}', 'extract': '{"admin":"$..mobile_phone"}', 'expected': None, 'check_sql': None}
2020-11-15 10:51:24,343 apitest INFO handle_requests.py [第12行] ==================开始发起请求============================
2020-11-15 10:51:24,343 apitest INFO handle_requests.py [第13行] 请求方法为：post
2020-11-15 10:51:24,343 apitest INFO handle_requests.py [第33行] 请求头为：
 {'X-Lemonban-Media-Type': 'lemonban.v2'}
2020-11-15 10:51:24,343 apitest INFO handle_requests.py [第40行] 请求数据为：
 {'mobile_phone': '15523786285', 'pwd': '123456789', 'type': 0, 'reg_name': 'qianyu'}
2020-11-15 10:51:24,343 apitest INFO handle_requests.py [第50行] 请求url为：
 http://api.lemonban.com/futureloan/member/register
2020-11-15 10:51:24,470 apitest INFO handle_requests.py [第26行] 请求响应状态码：200
2020-11-15 10:51:24,470 apitest INFO handle_requests.py [第27行] 请求响应为：
 {'code': 0, 'msg': 'OK', 'data': {'id': 57545, 'reg_name': 'qianyu', 'mobile_phone': '15523786285'}, 'copyright': 'Copyright 柠檬班 © 2017-2020 湖南省零檬信息技术有限公司 All Rights Reserved'}
2020-11-15 10:51:24,472 apitest INFO test_business_flow.py [第24行] #################开始执行业务流接口#######################
2020-11-15 10:51:24,473 apitest INFO handle_data.py [第89行] 用例中提取到的正则结果['admin']
2020-11-15 10:51:24,473 apitest INFO handle_data.py [第99行] 替换#admin#,替换后admin值为：15523786285
2020-11-15 10:51:24,473 apitest INFO handle_data.py [第100行] 替换后用例为：
 {'id': 2, 'title': '前置条件-登录', 'method': 'POST', 'url': 'member/login', 'request_data': '{"mobile_phone":"15523786285","pwd":"123456789"}', 'extract': '{"member_id":"$..id","token":"$..token"}', 'expected': None, 'check_sql': None}
2020-11-15 10:51:24,473 apitest INFO handle_requests.py [第12行] ==================开始发起请求============================
2020-11-15 10:51:24,473 apitest INFO handle_requests.py [第13行] 请求方法为：POST
2020-11-15 10:51:24,473 apitest INFO handle_requests.py [第33行] 请求头为：
 {'X-Lemonban-Media-Type': 'lemonban.v2'}
2020-11-15 10:51:24,473 apitest INFO handle_requests.py [第40行] 请求数据为：
 {'mobile_phone': '15523786285', 'pwd': '123456789'}
2020-11-15 10:51:24,474 apitest INFO handle_requests.py [第50行] 请求url为：
 http://api.lemonban.com/futureloan/member/login
2020-11-15 10:51:24,611 apitest INFO handle_requests.py [第26行] 请求响应状态码：200
2020-11-15 10:51:24,612 apitest INFO handle_requests.py [第27行] 请求响应为：
 {'code': 0, 'msg': 'OK', 'data': {'id': 57545, 'leave_amount': 0.0, 'mobile_phone': '15523786285', 'reg_name': 'qianyu', 'reg_time': '2020-11-15 10:51:19.0', 'type': 0, 'token_info': {'token_type': 'Bearer', 'expires_in': '2020-11-15 10:56:19', 'token': 'eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjU3NTQ1LCJleHAiOjE2MDU0MDg5Nzl9.sx9WHgdkzGxlToK7ON3RWlY09izqqm3lVpjk2wbnC76VS9bW5zs11P3UUctaUmp1G0EEEaNshgxsxrnmedDK0Q'}}, 'copyright': 'Copyright 柠檬班 © 2017-2020 湖南省零檬信息技术有限公司 All Rights Reserved'}
2020-11-15 10:51:24,613 apitest INFO test_business_flow.py [第24行] #################开始执行业务流接口#######################
2020-11-15 10:51:24,613 apitest INFO handle_data.py [第89行] 用例中提取到的正则结果['member_id']
2020-11-15 10:51:24,613 apitest INFO handle_data.py [第99行] 替换#member_id#,替换后member_id值为：57545
2020-11-15 10:51:24,613 apitest INFO handle_data.py [第100行] 替换后用例为：
 {'id': 3, 'title': '前置条件-加标', 'method': 'POST', 'url': 'loan/add', 'request_data': '{"member_id":"57545","title":"加标","amount":2000000,"loan_rate":10.0,"loan_term":6,"loan_date_type":1,"bidding_days":10}', 'extract': '{"loan_id":"$..id"}', 'expected': None, 'check_sql': None}
2020-11-15 10:51:24,613 apitest INFO handle_requests.py [第12行] ==================开始发起请求============================
2020-11-15 10:51:24,614 apitest INFO handle_requests.py [第13行] 请求方法为：POST
2020-11-15 10:51:24,614 apitest INFO handle_requests.py [第33行] 请求头为：
 {'X-Lemonban-Media-Type': 'lemonban.v2', 'Authorization': 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjU3NTQ1LCJleHAiOjE2MDU0MDg5Nzl9.sx9WHgdkzGxlToK7ON3RWlY09izqqm3lVpjk2wbnC76VS9bW5zs11P3UUctaUmp1G0EEEaNshgxsxrnmedDK0Q'}
2020-11-15 10:51:24,614 apitest INFO handle_requests.py [第40行] 请求数据为：
 {'member_id': '57545', 'title': '加标', 'amount': 2000000, 'loan_rate': 10.0, 'loan_term': 6, 'loan_date_type': 1, 'bidding_days': 10}
2020-11-15 10:51:24,614 apitest INFO handle_requests.py [第50行] 请求url为：
 http://api.lemonban.com/futureloan/loan/add
2020-11-15 10:51:24,749 apitest INFO handle_requests.py [第26行] 请求响应状态码：200
2020-11-15 10:51:24,750 apitest INFO handle_requests.py [第27行] 请求响应为：
 {'code': 0, 'msg': 'OK', 'data': {'id': 2176, 'member_id': 57545, 'title': '加标', 'amount': 2000000.0, 'loan_rate': 10.0, 'loan_term': 6, 'loan_date_type': 1, 'bidding_days': 5, 'create_time': '2020-11-15 10:51:19.0', 'bidding_start_time': None, 'full_time': None, 'status': 1}, 'copyright': 'Copyright 柠檬班 © 2017-2020 湖南省零檬信息技术有限公司 All Rights Reserved'}
2020-11-15 10:51:24,751 apitest INFO test_business_flow.py [第24行] #################开始执行业务流接口#######################
2020-11-15 10:51:24,751 apitest INFO handle_data.py [第89行] 用例中提取到的正则结果['loan_id']
2020-11-15 10:51:24,751 apitest INFO handle_data.py [第99行] 替换#loan_id#,替换后loan_id值为：2176
2020-11-15 10:51:24,751 apitest INFO handle_data.py [第100行] 替换后用例为：
 {'id': 4, 'title': '前置条件-审核通过', 'method': 'patch', 'url': 'loan/audit', 'request_data': '{"loan_id":2176,"approved_or_not":true}', 'extract': None, 'expected': None, 'check_sql': None}
2020-11-15 10:51:24,752 apitest INFO handle_requests.py [第12行] ==================开始发起请求============================
2020-11-15 10:51:24,752 apitest INFO handle_requests.py [第13行] 请求方法为：patch
2020-11-15 10:51:24,752 apitest INFO handle_requests.py [第33行] 请求头为：
 {'X-Lemonban-Media-Type': 'lemonban.v2', 'Authorization': 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjU3NTQ1LCJleHAiOjE2MDU0MDg5Nzl9.sx9WHgdkzGxlToK7ON3RWlY09izqqm3lVpjk2wbnC76VS9bW5zs11P3UUctaUmp1G0EEEaNshgxsxrnmedDK0Q'}
2020-11-15 10:51:24,752 apitest INFO handle_requests.py [第40行] 请求数据为：
 {'loan_id': 2176, 'approved_or_not': True}
2020-11-15 10:51:24,752 apitest INFO handle_requests.py [第50行] 请求url为：
 http://api.lemonban.com/futureloan/loan/audit
2020-11-15 10:51:24,888 apitest INFO handle_requests.py [第26行] 请求响应状态码：200
2020-11-15 10:51:24,888 apitest INFO handle_requests.py [第27行] 请求响应为：
 {'code': 0, 'msg': 'OK', 'data': None, 'copyright': 'Copyright 柠檬班 © 2017-2020 湖南省零檬信息技术有限公司 All Rights Reserved'}
2020-11-15 10:51:24,889 apitest INFO test_business_flow.py [第24行] #################开始执行业务流接口#######################
2020-11-15 10:51:24,890 apitest INFO handle_data.py [第89行] 用例中提取到的正则结果['member_id']
2020-11-15 10:51:24,890 apitest INFO handle_data.py [第99行] 替换#member_id#,替换后member_id值为：57545
2020-11-15 10:51:24,890 apitest INFO handle_data.py [第100行] 替换后用例为：
 {'id': 5, 'title': '前置条件-用户充值', 'method': 'POST', 'url': 'member/recharge', 'request_data': '{"member_id":"57545","amount":"5000000.0"}', 'extract': None, 'expected': None, 'check_sql': None}
2020-11-15 10:51:24,890 apitest INFO handle_requests.py [第12行] ==================开始发起请求============================
2020-11-15 10:51:24,891 apitest INFO handle_requests.py [第13行] 请求方法为：POST
2020-11-15 10:51:24,891 apitest INFO handle_requests.py [第33行] 请求头为：
 {'X-Lemonban-Media-Type': 'lemonban.v2', 'Authorization': 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjU3NTQ1LCJleHAiOjE2MDU0MDg5Nzl9.sx9WHgdkzGxlToK7ON3RWlY09izqqm3lVpjk2wbnC76VS9bW5zs11P3UUctaUmp1G0EEEaNshgxsxrnmedDK0Q'}
2020-11-15 10:51:24,891 apitest INFO handle_requests.py [第40行] 请求数据为：
 {'member_id': '57545', 'amount': '5000000.0'}
2020-11-15 10:51:24,891 apitest INFO handle_requests.py [第50行] 请求url为：
 http://api.lemonban.com/futureloan/member/recharge
2020-11-15 10:51:25,030 apitest INFO handle_requests.py [第26行] 请求响应状态码：200
2020-11-15 10:51:25,030 apitest INFO handle_requests.py [第27行] 请求响应为：
 {'code': 2, 'msg': '余额必须大于0并且小于或者等于500000', 'data': None, 'copyright': 'Copyright 柠檬班 © 2017-2020 湖南省零檬信息技术有限公司 All Rights Reserved'}
2020-11-15 10:51:25,030 apitest INFO test_business_flow.py [第24行] #################开始执行业务流接口#######################
2020-11-15 10:51:25,030 apitest INFO handle_data.py [第89行] 用例中提取到的正则结果['member_id', 'loan_id']
2020-11-15 10:51:25,030 apitest INFO handle_data.py [第99行] 替换#member_id#,替换后member_id值为：57545
2020-11-15 10:51:25,030 apitest INFO handle_data.py [第99行] 替换#loan_id#,替换后loan_id值为：2176
2020-11-15 10:51:25,030 apitest INFO handle_data.py [第100行] 替换后用例为：
 {'id': 6, 'title': '投资成功-管理员', 'method': 'POST', 'url': 'member/invest', 'request_data': '{"member_id":"57545","loan_id":2176,"amount":"2000000.0"}', 'extract': None, 'expected': '{"code":0,"msg":"OK"}', 'check_sql': None}
2020-11-15 10:51:25,031 apitest INFO handle_requests.py [第12行] ==================开始发起请求============================
2020-11-15 10:51:25,031 apitest INFO handle_requests.py [第13行] 请求方法为：POST
2020-11-15 10:51:25,031 apitest INFO handle_requests.py [第33行] 请求头为：
 {'X-Lemonban-Media-Type': 'lemonban.v2', 'Authorization': 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJtZW1iZXJfaWQiOjU3NTQ1LCJleHAiOjE2MDU0MDg5Nzl9.sx9WHgdkzGxlToK7ON3RWlY09izqqm3lVpjk2wbnC76VS9bW5zs11P3UUctaUmp1G0EEEaNshgxsxrnmedDK0Q'}
2020-11-15 10:51:25,031 apitest INFO handle_requests.py [第40行] 请求数据为：
 {'member_id': '57545', 'loan_id': 2176, 'amount': '2000000.0'}
2020-11-15 10:51:25,031 apitest INFO handle_requests.py [第50行] 请求url为：
 http://api.lemonban.com/futureloan/member/invest
2020-11-15 10:51:25,237 apitest INFO handle_requests.py [第26行] 请求响应状态码：200
2020-11-15 10:51:25,238 apitest INFO handle_requests.py [第27行] 请求响应为：
 {'code': 0, 'msg': 'OK', 'data': {'id': 434, 'member_id': 57545, 'loan_id': 2176, 'amount': 2000000.0, 'create_time': '2020-11-15 10:51:19', 'is_valid': 1}, 'copyright': 'Copyright 柠檬班 © 2017-2020 湖南省零檬信息技术有限公司 All Rights Reserved'}
2020-11-15 10:51:25,238 apitest INFO test_business_flow.py [第42行] 用例执行实际结果：{'code': 0, 'msg': 'OK', 'data': {'id': 434, 'member_id': 57545, 'loan_id': 2176, 'amount': 2000000.0, 'create_time': '2020-11-15 10:51:19', 'is_valid': 1}, 'copyright': 'Copyright 柠檬班 © 2017-2020 湖南省零檬信息技术有限公司 All Rights Reserved'}
2020-11-15 10:51:25,238 apitest INFO test_business_flow.py [第44行] 用例预期结果：{'code': 0, 'msg': 'OK'}
